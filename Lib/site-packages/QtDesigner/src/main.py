import os
import subprocess
import json
import config
import srra
import analysis
import players
import replay
import match


def main():
    replay_data = srra.ReplayData()
    replay_dirs = replay.Replay.find_replays()
    for replay_path in replay_dirs:
        try:
            match_as_json = replay.Replay.parse_replay(replay_path)

            if match.Match.is_one_vs_one(match_as_json):

                current_match = replay.Replay.get_match_data(match_as_json)
                replay_data.match_history.insert_match(
                    current_match)

        except Exception as e:
            replay_data.invalid_replays += 1
            print(e)

    return replay_data.match_history.match_history


'''
analysis.Statistics.match_outcome(player.race,opponent.race, 
current_match.match_winner, my_team)
'''

'''
    tvx, zvx, pvx, overall_win_ratio = analysis.winRatios(
        win_ratios)
    tvt_ratio, tvz_ratio, tvp_ratio = tvx
    zvt_ratio, zvz_ratio, zvp_ratio = zvx
    pvt_ratio, pvz_ratio, pvp_ratio = pvx
'''
