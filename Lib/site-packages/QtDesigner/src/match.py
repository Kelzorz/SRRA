from config import YOUR_LADDER_NAMES
"""
	A class used to represent a pog SCR match
"""


class Match:
    def __init__(self, map_name, description, players, match_type, match_date, winner_team):

        self.map_name = map_name
        self.map_description = description
        self.players = players
        self.match_type = match_type
        self.match_date = match_date
        self.winner_team = winner_team

    @staticmethod
    def is_one_vs_one(match_as_json):
        # if it's a 1v1 match
        return (len(match_as_json['Header']['Players']) == 2
                # if the type is Top vs Bottom
                and match_as_json['Header']['Type']['Name'] == "Top vs Bottom"
                # and if the ID is 15 it represents a ladder match
                and match_as_json['Header']['Type']['ID'] == 15)

    @staticmethod
    def get_player_index(match_as_json):
        for index, player in enumerate(match_as_json['Header']['Players']):
            if player['Name'] in YOUR_LADDER_NAMES:
                return (index, (index + 1) % 2)

    @staticmethod
    def includes_player_username(players):
        '''
            returns true if player's username is included in the match, false otherwise
        '''
        for player in players:
            if player['Name'] in YOUR_LADDER_NAMES:
                return True
        return False

    @staticmethod
    def is_valid(match_as_json):
        '''
            A 1v1 Ladder Match is valid if it has 2 players, Game Type is "Top vs Bottom"
            and Game Type ID is 15
        '''
        players = match_as_json['Header']['Players']
        return Match.is_one_vs_one(match_as_json) and Match.includes_player_username(players)
